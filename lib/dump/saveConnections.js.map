{"version":3,"sources":["../../src/dump/saveConnections.js"],"names":[],"mappings":";;;;;kBAQwB,e;;AARxB;;;;AACA;;;;AACA;;;;;;AAEA,IAAM,WAAW,gBAAE,IAAF,CAAO,gBAAE,IAAF,CAAO,eAAP,CAAP,EAAgC,gBAAE,KAAF,CAAQ,eAAR,CAAhC,CAAjB;AACA,IAAM,mBAAmB,gBAAE,OAAF,CAAU,gBAAE,MAAZ,EAAoB,gBAAE,aAAF,CAAgB,UAAC,MAAD,EAAS,IAAT;AAAA,SAAmB,EAAE,UAAF,EAAQ,cAAR,EAAnB;AAAA,CAAhB,CAApB,CAAzB;AACA,IAAM,YAAY,SAAZ,SAAY,CAAC,MAAD;AAAA,SAAY,gBAAE,IAAF,CAAO,QAAP,EAAiB,gBAAE,OAAF,CAAU,gBAAE,GAAF,CAAM,MAAN,CAAV,EAAyB,gBAAzB,CAAjB,CAAZ;AAAA,CAAlB;;AAEe,SAAS,eAAT,CAAyB,OAAzB,EAAkC;AAAA,MACvC,WADuC,GACS,OADT,CACvC,WADuC;AAAA,MACf,iBADe,GACS,OADT,CAC1B,OAD0B,CACf,iBADe;;AAE/C,MAAM,eAAe,2BAAY,iBAAZ,CAArB;;AAEA,SAAO,gBAAE,KAAF,CAAQ,aAAR,EAAuB,gBAAE,GAAF,CAAM,UAAU,YAAV,CAAN,EAA+B,WAA/B,CAAvB,EAAoE,OAApE,CAAP;;AAED","file":"saveConnections.js","sourcesContent":["import fs from 'fs'\nimport R from 'ramda'\nimport saveScripts from '../utils/saveScripts'\n\nconst ruleLens = R.lens(R.prop('customScripts'), R.assoc('customScripts'));\nconst transformForSave = R.compose(R.values, R.mapObjIndexed((script, name) => ({ name, script })));\nconst transform = (saveFn) => R.over(ruleLens, R.compose(R.map(saveFn), transformForSave));\n\nexport default function saveConnections(context) {\n  const { connections, options: { connectionScripts } } = context;\n  const saveScriptTo = saveScripts(connectionScripts);\n\n  return R.assoc('connections', R.map(transform(saveScriptTo), connections), context);\n  //return context;\n}\n\n"]}