{"version":3,"sources":["../../src/utils/saveScripts.js"],"names":[],"mappings":";;;;;kBAewB,W;;AAfxB;;;;AACA;;;;;;AAEA,IAAM,aAAa,SAAb,UAAa,CAAC,IAAD,EAAU;AAAE,SAAO,KAAK,WAAL,GAAmB,OAAnB,CAA2B,KAA3B,EAAkC,GAAlC,CAAP;AAA+C,CAA9E;;AAEA,SAAS,eAAT,CAAyB,GAAzB,EAA8B;AAC5B,MAAI;AACF,iBAAG,SAAH,CAAa,GAAb;AACD,GAFD,CAEE,OAAM,CAAN,EAAS;;AAEV;AACF;;;;AAIc,SAAS,WAAT,CAAqB,GAArB,EAA0B;AACvC,kBAAgB,GAAhB;;AAEA,SAAO,UAAS,UAAT,EAAqB;AAAA,QAClB,MADkB,GACD,UADC,CAClB,MADkB;AAAA,QACV,IADU,GACD,UADC,CACV,IADU;;AAE1B,QAAM,OAAU,GAAV,SAAiB,WAAW,IAAX,CAAjB,QAAN;;AAEA,iBAAG,aAAH,CAAiB,IAAjB,EAAuB,MAAvB;AACA,WAAO,gBAAE,OAAF,CAAU,gBAAE,KAAF,CAAQ,aAAR,EAAuB,IAAvB,CAAV,EAAwC,gBAAE,MAAF,CAAS,QAAT,CAAxC,EAA4D,UAA5D,CAAP;AACD,GAND;AAOD","file":"saveScripts.js","sourcesContent":["import fs from 'fs'\nimport R from 'ramda'\n\nconst scriptName = (name) => { return name.toLowerCase().replace(/\\s/g, \"_\") }\n\nfunction ensureScriptDir(dir) {\n  try {\n    fs.mkdirSync(dir);\n  } catch(e) {\n    // ignore\n  }\n}\n\n// Constructs a function that saves a given script definition\n// (form of `{ script, name }`) to a file\nexport default function saveScripts(dir) {\n  ensureScriptDir(dir);\n\n  return function(scriptDefn) {\n    const { script, name } = scriptDefn;\n    const path = `${dir}/${scriptName(name)}.js`;\n\n    fs.writeFileSync(path, script);\n    return R.compose(R.assoc('script_file', path), R.dissoc('script'))(scriptDefn);\n  }\n}\n"]}