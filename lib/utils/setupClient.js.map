{"version":3,"sources":["../../src/utils/setupClient.js"],"names":[],"mappings":";;;;;;kBAMe,UAAS,OAAT,EAAkB;AAAA,MACvB,MADuB,GACyB,OADzB,CACvB,MADuB;AAAA,MACJ,MADI,GACyB,OADzB,CACf,OADe,CACJ,MADI;AAAA,MACa,KADb,GACyB,OADzB,CACM,GADN,CACa,KADb;;AAE/B,MAAM,QAAQ,2BAAY,OAAZ,CAAd;AACA,MAAM,cAAc,OAAO,GAAP,CAAW,cAAX,EAA2B,MAA3B,CAApB;;AAEA,MAAG,CAAC,WAAJ,EAAiB;AACf,UAAM,yEAAN;AACA,YAAQ,IAAR,CAAa,CAAb;AACD;;AAED,MAAM,SAAS,IAAI,gBAAJ,CAAqB,EAAE,YAAF,EAAS,QAAW,WAAX,eAAT,EAArB,CAAf;AACA,SAAO,kBAAM,QAAN,EAAgB,MAAhB,EAAwB,OAAxB,CAAP;AACD,C;;AAlBD;;;;AACA;;AACA;;;;;;IAEQ,gB,kBAAA,gB","file":"setupClient.js","sourcesContent":["import auth0 from 'auth0'\nimport { assoc } from 'ramda'\nimport generateJwt from '../jwt/generateJWT'\n\nconst { ManagementClient } = auth0;\n\nexport default function(context) {\n  const { config, options: { domain }, say: { error } } = context;\n  const token = generateJwt(context);\n  const auth0Domain = config.get('auth0.domain', domain);\n\n  if(!auth0Domain) {\n    error(\"Auth0 domain required. Use the --domain flag or set in the config file.\");\n    process.exit(1);\n  }\n\n  const client = new ManagementClient({ token, domain: `${auth0Domain}.auth0.com` });\n  return assoc('client', client, context);\n}\n"]}