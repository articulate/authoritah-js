{"version":3,"sources":["../../src/utils/setupClient.js"],"names":[],"mappings":";;;;;;kBAMe,UAAS,OAAT,EAAkB;AAAA,MACvB,MADuB,GACsB,OADtB,CACvB,MADuB;AAAA,MACJ,GADI,GACsB,OADtB,CACf,OADe,CACJ,GADI;AAAA,MACU,KADV,GACsB,OADtB,CACG,GADH,CACU,KADV;;AAE/B,MAAM,QAAQ,2BAAY,OAAZ,CAAd;AACA,MAAM,cAAc,OAAO,GAAP,CAAW,WAAX,EAAwB,GAAxB,CAApB;;AAEA,MAAG,CAAC,WAAJ,EAAiB;AACf,UAAM,2EAAN;AACA,YAAQ,IAAR,CAAa,CAAb;AACD;;AAED,MAAM,SAAS,IAAI,gBAAJ,CAAqB,EAAE,YAAF,EAAS,QAAW,WAAX,eAAT,EAArB,CAAf;AACA,SAAO,kBAAM,QAAN,EAAgB,MAAhB,EAAwB,OAAxB,CAAP;AACD,C;;AAlBD;;;;AACA;;AACA;;;;;;IAEQ,gB,kBAAA,gB","file":"setupClient.js","sourcesContent":["import auth0 from 'auth0'\nimport { assoc } from 'ramda'\nimport generateJwt from '../jwt/generateJWT'\n\nconst { ManagementClient } = auth0;\n\nexport default function(context) {\n  const { config, options: { env }, say: { error } } = context;\n  const token = generateJwt(context);\n  const auth0Domain = config.get('auth0.env', env);\n\n  if(!auth0Domain) {\n    error(\"Auth0 environment required. Use the --env flag or set in the config file.\");\n    process.exit(1);\n  }\n\n  const client = new ManagementClient({ token, domain: `${auth0Domain}.auth0.com` });\n  return assoc('client', client, context);\n}\n"]}